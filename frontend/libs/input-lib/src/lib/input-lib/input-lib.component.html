<form nxLayout="grid maxwidth" [formGroup]="profile">
  <div nxRow>
    <div nxCol="12">
      <div class="nx-margin-bottom-4m">
        <div nxRow>
          <div nxCol="12">
            <lib-date-picker
              formControlName="geburtsdatum"
            ></lib-date-picker>
          </div>
        </div>
        @if (inputStore.uiState().geburtsdatum.error) {
          <div nxRow class="nx-margin-top-2xs nx-margin-bottom-2xs">
            <div nxCol="12">
              <nx-error nxFormfieldError [showIcon]="true">
                {{ inputStore.uiState().geburtsdatum.error }}
              </nx-error>
            </div>
          </div>
        }
      </div>

      <div class="nx-margin-bottom-2m">
        <div nxRow>
          <div nxCol="12,12,8,8">
            <nx-formfield [label]="'Leistungs-/ Beitragsvorgabe'" id="leistungsVorgabe">
              <nx-dropdown formControlName="leistungsVorgabe" [options]="leistungsVorgabeOpts" />
            </nx-formfield>
          </div>
          <div nxCol="12,12,4,4">
            <nx-formfield [label]="'Beitrag'" appearance="auto" floatLabel="auto">
              <input nxInput type="number" formControlName="beitrag" />
            </nx-formfield>
          </div>
        </div>
        @if (inputStore.uiState().beitrag.error) {
          <div nxRow class="nx-margin-top-2xs nx-margin-bottom-2xs">
            <div nxCol="12">
              <nx-error nxFormfieldError [showIcon]="true">
                {{ inputStore.uiState().beitrag.error }}
              </nx-error>
            </div>
          </div>
        }
      </div>

      <div class="nx-margin-bottom-2m">
        <div nxRow>
          <div nxCol="12,12,8,8">
            <nx-formfield [label]="'Berechnung der Laufzeit'">
              <nx-dropdown formControlName="berechnungDerLaufzeit" [options]="berechnungDerLaufzeitOpts" />
            </nx-formfield>
          </div>
          <div nxCol="12,12,4,4">
            <nx-formfield [label]="'Jahre'" appearance="auto" floatLabel="auto">
              <input nxInput type="number" formControlName="laufzeit" />
            </nx-formfield>
          </div>
        </div>
        @if (inputStore.uiState().laufzeit.error) {
          <div nxRow class="nx-margin-top-2xs nx-margin-bottom-2xs">
            <div nxCol="12">
              <nx-error nxFormfieldError [showIcon]="true">
                {{ inputStore.uiState().laufzeit.error }}
              </nx-error>
            </div>
          </div>
        }
      </div>

      <div nxRow class="nx-margin-bottom-2m">
        <div nxCol="12">
          <nx-formfield [label]="'Beitragszahlungsweise'">
            <nx-dropdown formControlName="beitragszahlungsweise" [options]="beitragszahlungsweiseOpts" />
          </nx-formfield>
        </div>
      </div>

      <div nxRow>
        <div nxCol="12">
          <nx-formfield [label]="'Rentenzahlungsweise'">
            <nx-dropdown formControlName="rentenzahlungsweise" [options]="rentenzahlungsweiseOpts" />
          </nx-formfield>
        </div>
      </div>
    </div>
  </div>
  <div nxRow>
    <div nxCol="4">
      @if (isProcessingData()) {
        <nx-spinner
          size="large"
          [activationAnnouncement]="'Calculating quote...'"
          [completionAnnouncement]="'Quota calculation completed.'"
        ></nx-spinner>
      }
      @if (!isProcessingData()) {
        <button nxButton type="button" (click)="calculate()">Berechnen</button>
      }
    </div>
    <div nxCol="8">
      <lib-error-box [errorMessage]="errorResponse()"></lib-error-box>
    </div>
  </div>
</form>
